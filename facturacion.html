<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<meta http-equiv="pragma" content="no-cache" />
	<meta http-equiv="cache-control" content="no-cache" />
	<meta http-equiv="expires" content="Tue, 01 Jan 1980 00:00:00 GMT" />

	<title>Mi Facturación</title>
	<link href="style.css" rel="stylesheet" type="text/css" />
	<script type="text/javascript" src="scripts/cfd.js"></script>



<link rel="stylesheet" href="css/jquery-ui.css">
<script src="scripts/jquery.min.js"></script>
<script src="scripts/jquery-ui.min.js"></script>
<script src="scripts/jquery.blockUI.min.js"></script>

<style>
	.fb_label {width:160px}
	.fb_required {width:160px}
	#headerform_datos td.fb_field {width: 100px; text-align: right}
	#ticket_pago td.fb_field input {text-align: right}
	#previous table {width: 100%;}
	.cantidad, .valorUnitario, .descuentos, .impuestos, .total {text-align:right}
	.descripcion {padding-left: 1em; text-align:left}
	#ticket_re_rfc_field, #ticket_pago_00_field {width: 610px}
	#ticket_pago {margin-top:10px; margin-bottom: 10px}
	#ticket_pago legend {color: red}
	input[type=text] {width: 250px}
	#get_body input[type=text] {width: 130px}
</style>



</head>
<body>
<div id="container">
  <div class="header">
    <div class="logo">
      </div>

    <div id="nav">

          </div>

    <div class="tituloseccion"></div>

  </div>

  <div id="content">
			<div id="left">


				<div class="post" id="post1">


<h1>Facturar ticket</h1>







<table width='100%'>
<tr  valign='top'><td width='50%'></td>

</tr></table>


<p>Llene el formulario para generar su CFDI (factura electrónica). El número de referencia y total deben estar impresos en su ticket. Para cualquier aclaración contacte al emisor (restaurante o comercio al que le pagó).</p>






				</div>


				<div class="post" id="post2">
					<script type="text/javascript"><!-- hide from old browsers
function validate_get (form) {
    var alertstr = '';
    var invalid  = 0;
    var invalid_fields = new Array();

		//RFC toUpperCase
		form.elements['rfc_receptor'].value = form.elements['rfc_receptor'].value.toUpperCase();
		form.elements['referencia'].value = form.elements['referencia'].value.toLowerCase();
    // rfc_receptor: standard text, hidden, password, or textarea box
    var rfc_receptor = form.elements['rfc_receptor'].value;
    if (rfc_receptor == null || ! rfc_receptor.match(/^[A-Z&Ñ]{3,4}[0-9]{2}(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])[A-Z0-9]{2}[0-9A]$/)) {
        alertstr += 'Introduzca un valor válido para el campo: "Su RFC"\n';
        invalid++;
        invalid_fields.push('rfc_receptor');
    }
    // referencia: standard text, hidden, password, or textarea box
    var referencia = form.elements['referencia'].value;
    if (referencia == null || ! referencia.match(/^[0-9a-fA-F]{5}(-?)[0-9a-fA-F]{5}(-?)[0-9a-fA-F]{5}$/)) {
        alertstr += 'Introduzca un valor válido para el campo: "Referencia"\n';
        invalid++;
        invalid_fields.push('referencia');
    }
    // total: standard text, hidden, password, or textarea box
    var total = form.elements['total'].value;
    if (total == null || ! total.match(/^\s*[0-9]+\.?[0-9]*$|^\s*\.[0-9]+\s*$/)) {
        alertstr += 'Introduzca un valor válido para el campo: "Total"\n';
        invalid++;
        invalid_fields.push('total');
    }
    if (invalid > 0 || alertstr != '') {
        return field_errors(form, invalid, alertstr, invalid_fields);
    }
    return true;  // all checked ok
}
//-->
</script>
<noscript><font color="#cc0000"><b>
</b></font></noscript>
<p>Los campos <b>resaltados</b> son obligatorios
</p>

<!-- Generated by CGI::FormBuilder v3.09 available from www.formbuilder.org -->
<form action="cfdi.html" charset="ISO-8859-1" id="get" method="post" name="get" onsubmit="return validate_get(this);">
<div id="get_state"><input id="_submitted_get" name="_submitted_get" type="hidden" value="1" /></div>
<div id="get_extra"><input id="m" name="m" type="hidden" value="p_ticket" /></div>
<table id="get_body">
<tr id="get_rfc_receptor_row" valign="top">
  <td id="get_rfc_receptor_label"><b>Su RFC</b></td>
  <td id="get_rfc_receptor_field"><input id="rfc_receptor" maxlength="13" name="rfc_receptor" size="17" type="text" /> (ej. AAA010101AAA; para extranjero usar XEXX010101000; para mexicano sin RFC usar XAXX010101000)</td>
</tr>
<tr id="get_referencia_row" valign="top">
  <td id="get_referencia_label"><b>Referencia</b></td>
  <td id="get_referencia_field"><input id="referencia" maxlength="17" name="referencia" size="17" type="text" /> (ej. 12345-67890-abcde; sólo dígitos o letras de la "A" a la "F")</td>
</tr>
<tr id="get_total_row" valign="top">
  <td id="get_total_label"><b>Total</b></td>
  <td id="get_total_field"><input id="total" maxlength="10" name="total" size="17" type="text" /> (monto total del ticket sin propina)</td>
</tr>
<tr id="get_submit_row" valign="top">
  <td align="center" colspan="2" id="get_submit_field"><input id="get_submit" name="_submit" type="submit" value="Buscar referencia" /></td>
</tr>
</table>
</form>

				</div>


				<div class="post" id="post3">


<div id="submitted" style='display:none; border-style: solid; background-color: red'>
<p>Estamos enviando su solicitud al PAC. En el peor de los casos esto puede tomar hasta <b>tres minutos.</b></p>
<p>Por favor no recargue la página ni utilice el botón "atrás" de su navegador.</p>
</div>





<script language="javascript">
<!--
function validate(form) {
	if (!validate_ticket(form))
		return(false);
	disable_buttons(form);

	if (form._submit.value == 'Generar comprobante') {
		form.parentNode.style.display = 'none';
		var e = document.getElementById('submitted');
		if (e)
			e.style.display = 'block';
	}
	return(true);
}

$().ready(function() {
	var selector = 'input[type="text"]:enabled, input[type="radio"]:checked';
	$(selector).keydown(function (e) {
		if (e.which === 13) {
			var index = $(selector).index(this) + 1;
			if (index < $(selector).length) {
				$(selector).eq(index).focus().select();
				e.preventDefault();
				return false;
			}
		}
	});

	$('#re_rfc').change(function () {
		var val = $(this).val().toUpperCase();
		$(this).val(val);

		if ($('#re_nombre').val() == '' && $('#re_email').val() == '') {
			/*
			if (!validate_ticket($('form#ticket')[0])) {
				setTimeout(function(){
					$('#re_rfc').focus().select();
				}, 100);
			} else {
			*/
				$.blockUI({ message: null });

				$.ajax({
					method: 'GET',
					data: {
						ajax_rfc: val
					},
					dataType: 'json',
					timeout: 20000
				}).always(function() {
					$.unblockUI();
					$('#re_nombre').prop('disabled', false).focus();
					$('#re_email').prop('disabled', false);
				}).fail(function() {
					alert("No se pudo cargar información del receptor");
				}).done(function(ret) {
					$.unblockUI({ message: null });
					if (ret.found) {
						$('#re_nombre').val(ret.re_nombre);
						$('#re_email').val(ret.re_email);
						$('#re_nombre').prop('disabled', false).select();
					}
				});
			/*
			}
			*/
		}
	});

	if ($('#cw').val() == '1') {
		$('input[value="Regresar"]').hide();
		if ($('input#re_rfc').val() == '') {
			$('input#re_nombre').prop('disabled', true);
			$('input#re_email').prop('disabled', true);
		}

		$('.notab').attr('tabindex', '-1');
		$('.header').hide();
	}

	$('.editar').each(function() {
		var label = $(this).parent().parent().children()[0];
		var buttonhtml = "<button class='ui-button ui-widget ui-corner-all ui-button-icon-only'><span class='ui-icon ui-icon-pencil'></span> E</button>";
		$(label).html("<table width='100%'><td>" + $(label).text() + "</td><td align='right'>" + buttonhtml + "</td></table>");
	});


	$('.noeditar').each(function() {
		var label = $(this).parent().parent().children()[0];
		$(label).tooltip({
			items: "td",
			content: 'no se puede modificar forma de pago porque ya existen facturas parciales'
		})
	});



});
-->
</script>

				</div>


			</div>
	<div style="clear:both"></div>
  </div>
</div>
</body>
</html>
